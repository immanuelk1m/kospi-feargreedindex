<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon.ico">
<link rel="icon" type="image/png" href="./assets/img/favicon.ico">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>코스피 공포 탐욕 지수</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700|Source+Sans+Pro:400,600,700" rel="stylesheet">
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<!-- Main CSS -->
<link href="./assets/css/main.css" rel="stylesheet"/>


<!--JS-->
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7656508177587264"
     crossorigin="anonymous"></script>
	 
</head>

<body>

<header class ="header_wrapper-outer" style="height: 316px; top: -276px; margin-bottom: 0px;">
	<div class="header__wrapper-inner">
		

	</div>


</header>
<nav class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
<div class="container">
	<a class="navbar-brand" href="./index.html"><strong>코스피 공포 탐욕 지수</strong></a>
	<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
	</button>
	<div class="navbar-collapse collapse" id="navbarColor02">
		<ul class="navbar-nav mr-auto d-flex align-items-center">
			<li class="nav-item">
			<a class="nav-link" href="./">Main <span class="sr-only">(current)</span></a>
			</li>
			<li class="nav-item">
			<a class="nav-link" href="./factors">Factors</a>
			</li>
			<li class="nav-item">
			<a class="nav-link" href="./sector">Sectors</a>
			</li>
			
		</ul>
		<!-- 변하는 버튼
		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item highlight">
			<a class="nav-link" href="https://www.wowthemes.net/mundana-free-html-bootstrap-template/">변하는 버튼</a>
			</li>
		</ul>-->
	</div>
</div>
</nav>
<!-- End Navbar -->

    
<div class="container">
	<div class="jumbotron jumbotron-fluid mb-3 pt-0 pb-0 bg-lightblue position-relative">
		<div class="pl-4 pr-0 h-100 tofront">
			<div class="row justify-content-between">
				<div class="col-md-6 pt-6 pb-6 align-self-center">
					<h1 class="secondfont mb-3 font-weight-bold">코스피 공포 탐욕 지수</h1>
					<p class="mb-3">
						한국 시장의 코스피 공포와 탐욕 지수는 CNN FEAR & GREED INDEX를 참고해 만들었습니다 <br> 모멘텀, 주가 성장 비율, VIX, 풋옵션 콜옵션 비율, 안전 자산 수요, 회사채 수요 6가지 팩터를 고려해 코스피 시장의 흐름을 파악합니다 <br> 공포와 탐욕 지수가 높을수록 시장이 위험 구간에 있음을 나타내며, 그 반대로 낮을수록 안정적인 구간에 있다고 볼 수 있습니다
					</p>
				</div>
				<div class="col-md-6 d-none d-md-block pr-0" style="background-size:cover;background-image:url(./assets/img/demo/home.jpg);">	</div>
			</div>
		</div>
	</div>
</div>
    
<div class="container pt-4 pb-4">
	<div class="row">
		<!-- Gauge chart -->
		<div class="col-lg-6">
			<script src="https://kospi-fear-greed-index.co.kr/chart.js"></script>
				<style>
					.chartout {
						height: 320px;
						width: 100%;
						text-align: center;
					}
					.chartdiv {
						height:100%; 
						width:100%;
						display: inline-block;
					}
				</style>
				<div class = chartout >
					<div class=chartdiv></div>
				</div>
		</div>
		<!-- 과거 데이터 -->
		<div class="col-lg-6">
			<div class="sec7-text-box" style = "text-align: center;  margin-top: 80px;">
				<p class="font18" style="text-align: center;">마지막 업데이트 : <span class="today"></span></p>
				<p class="font18">매일 오전/오후 8시마다 업데이트 됩니다</p>

				<p class="font15 time-title"></p>
				<div class="time font40">
				  <span class="hours"></span>
				  <span class="col">시</span>
				  <span class="minutes"></span>
				  <span class="col">분</span>
				  <span class="seconds"></span>
				  <span class="col">초</span>
				</div>



				</div>
		</div>
	</div>
</div>
    
<div class="container">
	<div class="row justify-content-between">
		<div class="col-md-4 pl-4">
            <h5 class="font-weight-bold spanborder"><span>History</span></h5>
			
				<div class="precontain">
					<p id="w_c">지난 주</p>
					<p id="w"></p>
					<p id="w_s"></p>
				</div>
				
				<div class="precontain">
					<p id="m_c">지난 달</p>
					<p id="m"></p>
					<p id="m_s"></p>
				</div>

				<div class="precontain">
					<p id="y_c">지난 해</p>
					<p id="y"></p>
					<p id="y_s"></p>
				</div>
			
		</div>
		
		<div class="col-md-8">
			<h5 class="font-weight-bold spanborder"><span>Index vs KOSPI</span></h5>
			<div class="chart-container" style="position: relative;">
			    <canvas id="index_line" style="height:30vh; width:90%"></canvas>
			</div>										
			
						
			
		</div>
		
	</div>
</div>
    
<!--------------------------------------
FOOTER
--------------------------------------->
<div class="container mt-5">
	<footer class="bg-white border-top p-3 text-muted small">
	<div class="row align-items-center justify-content-between">
		<div>
            <span class="navbar-brand mr-2"><strong>KGF Index</strong></span> Copyright &copy;
			<script>document.write(new Date().getFullYear())</script>
			 . All rights reserved.
		</div>
	</div>
	</footer>
</div>
<!-- End Footer -->
    
<!--------------------------------------
JAVASCRIPTS
--------------------------------------->
<script src="./assets/js/vendor/jquery.min.js" type="text/javascript"></script>
<script src="./assets/js/vendor/popper.min.js" type="text/javascript"></script>
<script src="./assets/js/vendor/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/js/functions.js" type="text/javascript"></script>




<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@^2"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment@^1"></script>

<script src="https://kospi-fear-greed-index.co.kr/assets/js/index_kospi.js"></script>



<script>
	var today = new Date();
	var yesterday = new Date(today.setDate(today.getDate() -1));

	var yes_y = yesterday.getFullYear();
	var yes_m = yesterday.getMonth() +1 ;
	var yes_d = yesterday.getDate();



	$(".today").html(yes_y + ' / '+ yes_m + ' / '+ yes_d  + ' /  20:00') ;

</script>
<script>
	function remaindTime() {
	var now = new Date();
	var end = new Date(now.getFullYear(),now.getMonth(),now.getDate(),20,00,00);
	var open = new Date(now.getFullYear(),now.getMonth(),now.getDate(),08,00,00);

	var nt = now.getTime();
	var ot = open.getTime();
	var et = end.getTime();

   if(nt<ot){
	 $(".time").fadeIn();
	 $("p.time-title").html("내일 업데이트까지 남은 시간");
	 sec =parseInt(ot - nt) / 1000;
	 day  = parseInt(sec/60/60/24);
	 sec = (sec - (day * 60 * 60 * 24));
	 hour = parseInt(sec/60/60);
	 sec = (sec - (hour*60*60));
	 min = parseInt(sec/60);
	 sec = parseInt(sec-(min*60));
	 if(hour<10){hour="0"+hour;}
	 if(min<10){min="0"+min;}
	 if(sec<10){sec="0"+sec;}
	  $(".hours").html(hour);
	  $(".minutes").html(min);
	  $(".seconds").html(sec);
   } else if(nt>et){
	$("p.time-title").html("업데이트 완료!");
	$(".time").fadeOut();
   }else {
	   $(".time").fadeIn();
	 $("p.time-title").html("오늘 업데이트 까지 남은 시간");
	 sec =parseInt(et - nt) / 1000;
	 day  = parseInt(sec/60/60/24);
	 sec = (sec - (day * 60 * 60 * 24));
	 hour = parseInt(sec/60/60);
	 sec = (sec - (hour*60*60));
	 min = parseInt(sec/60);
	 sec = parseInt(sec-(min*60));
	 if(hour<10){hour="0"+hour;}
	 if(min<10){min="0"+min;}
	 if(sec<10){sec="0"+sec;}
	  $(".hours").html(hour);
	  $(".minutes").html(min);
	  $(".seconds").html(sec);
   }
 }
 setInterval(remaindTime,1000);


</script>


<script>

	let xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
	  if (this.readyState == 4 && this.status == 200) {
		let myObj = JSON.parse(this.responseText);
		
		document.getElementById("w").innerHTML = myObj.week;
		document.getElementById("w_s").innerHTML = myObj.week_s;

		document.getElementById("m").innerHTML = myObj.month;
		document.getElementById("m_s").innerHTML = myObj.month_s;

		document.getElementById("y").innerHTML = myObj.year;
		document.getElementById("y_s").innerHTML = myObj.year_s;


		function changeColor(box , value) {
			if (value >= 80) {
				box.style.backgroundColor = '#0f9747';
			} 
			else if (value >= 60) {
				box.style.backgroundColor = '#b0d136';
			}
			else if (value >= 40) {
				box.style.backgroundColor = '#f3eb0c';
			}
			else if (value >= 20) {
				box.style.backgroundColor = '#fdae19';
			} 
			else {
				box.style.backgroundColor = '#ee1f25';
			}
		}
		const box1 = document.querySelector('#w_s');
		const box2 = document.querySelector('#m_s');
		const box3 = document.querySelector('#y_s');

		var box_list = [box1,box2,box3];
		var var_list = [myObj.week,myObj.month,myObj.year];
		for (let i = 0; i < 3; i++) {
		changeColor(box_list[i], var_list[i]);
		}

	  }
	};
	xhr.open("GET", "https://kospi-fear-greed-index.co.kr/assets/js/json/value.json", true);
	xhr.send();
	
	
	
</script>

</body>
</html>
